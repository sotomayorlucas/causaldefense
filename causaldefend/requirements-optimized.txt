# ============================================================================
# CausalDefend - Requirements Optimizado
# Paquetes esenciales para detección de APTs con GNNs Causales
# ============================================================================

# ============================================================================
# CORE: Deep Learning & Graph Neural Networks
# ============================================================================
torch>=2.1.0
torch-geometric>=2.4.0
pytorch-lightning>=2.1.0
networkx>=3.2

# PyG dependencies (instalar después de torch)
# Nota: Usar wheels específicos de tu versión de CUDA/CPU
# Ver: https://pytorch-geometric.readthedocs.io/en/latest/install/installation.html
# torch-scatter>=2.1.0
# torch-sparse>=0.6.17
# torch-cluster>=1.6.1

# ============================================================================
# CAUSALITY: Inferencia Causal
# ============================================================================
causal-learn>=0.1.3        # PC, FCI, GES algorithms
pgmpy>=0.1.24             # Bayesian networks
# dowhy>=0.11             # Opcional: Causal inference framework

# ============================================================================
# ML UTILITIES: Machine Learning Básico
# ============================================================================
scikit-learn>=1.3.0
numpy>=1.24.0,<2.0        # Importante: <2.0 para compatibilidad
scipy>=1.10.0
pandas>=2.1.0

# ============================================================================
# UNCERTAINTY: Quantificación de Incertidumbre
# ============================================================================
mapie>=0.7.0              # Conformal prediction

# ============================================================================
# API & WEB: FastAPI Server
# ============================================================================
fastapi>=0.104.0
uvicorn[standard]>=0.24.0
pydantic>=2.5.0
pydantic-settings>=2.1.0
python-multipart>=0.0.6

# ============================================================================
# AUTHENTICATION & SECURITY
# ============================================================================
python-jose[cryptography]>=3.3.0
passlib[bcrypt]>=1.7.4
pyjwt>=2.8.0
cryptography>=41.0.0

# ============================================================================
# DATABASE: PostgreSQL & Migrations
# ============================================================================
sqlalchemy>=2.0.23
psycopg2-binary>=2.9.9
alembic>=1.12.0
asyncpg>=0.29.0

# ============================================================================
# CACHE & MESSAGE QUEUE: Redis & Celery
# ============================================================================
redis>=5.0.0
celery>=5.3.0
flower>=2.0.1              # Celery monitoring

# ============================================================================
# VISUALIZATION: Plotting & Dashboards
# ============================================================================
matplotlib>=3.8.0
seaborn>=0.13.0
plotly>=5.18.0
graphviz>=0.20.1

# ============================================================================
# CONFIGURATION & LOGGING
# ============================================================================
pyyaml>=6.0.1
python-dotenv>=1.0.0
loguru>=0.7.2
python-json-logger>=2.0.7
rich>=13.7.0               # Beautiful terminal output

# ============================================================================
# MONITORING: Prometheus & OpenTelemetry
# ============================================================================
prometheus-client>=0.19.0
# opentelemetry-api>=1.21.0      # Opcional
# opentelemetry-sdk>=1.21.0      # Opcional

# ============================================================================
# TESTING: Pytest & Coverage
# ============================================================================
pytest>=7.4.0
pytest-cov>=4.1.0
pytest-asyncio>=0.21.0

# ============================================================================
# CODE QUALITY: Formatting & Linting
# ============================================================================
black>=23.11.0
flake8>=6.1.0
mypy>=1.7.0
isort>=5.12.0

# ============================================================================
# DATA PROCESSING: Arrow & Utilities
# ============================================================================
pyarrow>=14.0.0
tqdm>=4.66.0
click>=8.1.7
tenacity>=8.2.0

# ============================================================================
# TEMPLATES & RENDERING
# ============================================================================
jinja2>=3.1.2

# ============================================================================
# EXPERIMENT TRACKING (Opcional - comentar si no se usa)
# ============================================================================
# mlflow>=2.8.0
# wandb>=0.16.0
tensorboard>=2.15.0        # Para PyTorch Lightning

# ============================================================================
# EXTERNAL DATASETS: Descarga y procesamiento
# ============================================================================
requests>=2.31.0
beautifulsoup4>=4.12.0     # Para scraping de datasets
